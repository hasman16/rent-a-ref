<div class="row">
  <div class="col-12">

    <div class="card" *ngIf="isViewState('editEvent');">
      <app-toast [message]="toast.message"></app-toast>

      <div class="card form-size">
        <events-form (ngSubmit)="submitEvent($event)" (ngCancel)="setEventsMode($event)"
         [model]="model"
         [states]="states"
         [sports]="sports"></events-form>
      </div>

    </div>

    <div class="card" [class.horizontal-and-vertical-centering]="isViewState('noEvents')" *ngIf="isViewState('listEvents') || isViewState('noEvents') ">
        <input
        type='text'
        style='padding:8px;margin:15px auto;width:30%;'
        placeholder='Type to filter by "Event Name" ...'
        (keyup)='updateFilter($event)'
        />

      <div class="form-size" *ngIf="isViewState('noEvents') ">
        <strong class="etched-text">You have no <i>Events</i>.</strong>
        <p>You need to create at least one event. Once the event you can create and assign <i>games</i> to the event.
          <br />Although creating games is optional, it allows more fine grained control of each event. Note a game can have the same address or a different address from avenue.</p>
        <button class="btn btn-primary btn-sm" (click)="createNewEvent()" title="Click to create new event">New Event</button>
      </div>

      <div class="form-size" *ngIf="isViewState('listEvents')">

        <ngx-datatable class="bootstrap"
          [rows]="games"
          [columnMode]="'force'"
          [headerHeight]="50"
          [footerHeight]="50"
          [rowHeight]="'auto'"
          [externalSorting]="true"
          [loadingIndicator]="isLoading"
          (sort)="onSort($event)"
          [externalPaging]="true"
          [count]="page.total_elements"
          [offset]="page.offset"
          [limit]="page.limit"
          (page)='setPage($event)'
          >
          <ngx-datatable-column name="Event Name" prop="event_name" editable="false"></ngx-datatable-column>
          <ngx-datatable-column name="Date" prop="event_date" editable="false">
            <ng-template let-value="value" ngx-datatable-cell-template>
              {{ value | date :'MMM dd, yyyy' }}
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column name="Venue" prop="venue_name" editable="false"></ngx-datatable-column>
          <ngx-datatable-column name="Status" prop="status" editable="false"></ngx-datatable-column>

          <ngx-datatable-column name="" prop="id" editable="true">
            <ng-template let-value="value" ngx-datatable-cell-template>
              <button class="btn btn-success btn-sm" (click)="goPayForEvent(value)" title="Click to pay for this event">Pay</button>
            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column name="" prop="id" editable="true">
            <ng-template let-value="value" ngx-datatable-cell-template>
              <button class="btn btn-primary btn-sm" (click)="editEvents(value)" title="Click to edit this event">Edit</button>
            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column name="" prop="id" editable="true">
            <ng-template let-value="value" ngx-datatable-cell-template>
              <button class="btn btn-danger btn-sm" (click)="deleteEvent(value)" title="Click to delete event">Delete</button>
            </ng-template>
          </ngx-datatable-column>                 
        </ngx-datatable>

        <hr />
        <button class="btn btn-primary btn-sm new-org-button" (click)="createNewEvent()" title="Click to create new event">New Event</button>
      </div>
    </div>

    <div class="card" *ngIf="isViewState('payingForEvent')">

      <mat-card>
        <header>
          <h1>Payment</h1>
        </header>
        <br />
        <div class="row">
          
          <div class="col-6">
            <event-order-table [model]="model"></event-order-table>
          </div>

          <div class="col-6">
             <rar-stripe [amount]="model.total" [lineItems]="eventsComponentService.lineItems" [reference_id]="organization_id"></rar-stripe>
          </div>

        </div>
      </mat-card>

    </div>

  </div>
</div>