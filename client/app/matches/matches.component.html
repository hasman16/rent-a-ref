<div class="row">
  <div class="col-12" *ngIf="isViewState('noMatches')">
  	<div class="card horizontal-and-vertical-centering ">
      <div class="form-size">
        <strong class="etched-text">You have no <i>Matches</i>.</strong>
        <p>You need to create at least one Match. Once the match is created you can assign <i>referees</i> to the match.</p>
          
        <button class="btn btn-primary btn-sm"  title="Click to create a new match" (click)="createNewMatch()">New Match</button>
      </div>
    </div>
  </div>

  <div class="col-12" *ngIf="isViewState('editMatch')">
    <div class="card mx-auto match-form">
      <matches-form 
      [model]="model"          
      [states]="states"
      (ngSubmit)="submitMatch($event)"
      (ngCancel)="setMatchesMode($event)"></matches-form>
    </div>
  </div>

  <div class="col-12" *ngIf="isViewState('listMatches')">
    <ngx-datatable class="bootstrap"
      [rows]="matches"
      [columnMode]="'force'"
      [headerHeight]="50"
      [footerHeight]="50"
      [rowHeight]="'auto'"
      [externalSorting]="true"
      [loadingIndicator]="isLoading"
      (sort)="onSortTableColumn($event)"
      [externalPaging]="true"
      [count]="page.total_elements"
      [offset]="page.offset"
      [limit]="page.limit"
      (page)='setPage($event)'
      [selected]="selected"
      [selectionType]="'single'"
      (select)='onSelectTableRow($event)'
      >
      <ngx-datatable-column name="Match Name" prop="match_name" editable="false"></ngx-datatable-column>
      <ngx-datatable-column name="Match Date" prop="id" editable="false">
        <ng-template let-value="value" ngx-datatable-cell-template>
          {{ formatDate(value) }}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Venue" prop="venue_name" editable="false"></ngx-datatable-column>
      <ngx-datatable-column name="Status" prop="status" editable="false"></ngx-datatable-column>

      <ngx-datatable-column name="" prop="id" editable="true" *ngIf="auth.isAdmin">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <button class="btn btn-success btn-sm" (click)="assignOfficials(value)" title="Click to Assign officials">Officials</button>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="" prop="id" editable="true">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <button class="btn btn-primary btn-sm" (click)="editMatch(value)" title="Click to edit this match">Edit</button>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="" prop="id" editable="true">
        <ng-template let-value="value" ngx-datatable-cell-template>
          <button class="btn btn-danger btn-sm" (click)="deleteMatch(value)" title="Click to delete match">Delete</button>
        </ng-template>
      </ngx-datatable-column>   
    </ngx-datatable>

    <br /><br />
    <button class="btn btn-primary btn-sm"  title="Click to create a new match" (click)="createNewMatch()">New Match</button>
  </div>

  <div class="col-12" *ngIf="isViewState('assignOfficials')">
    <rar-assign-users [match]="currentMatch" (back)="backToList($event)"></rar-assign-users>
  </div>

  <rar-alert-modal><p>Are you sure you want to delete match: {{delete_id}}.</p></rar-alert-modal>   
</div>
